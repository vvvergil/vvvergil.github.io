---
title: 服务器端渲染(SSR)的定义和相关技术
date: 2023-09-1 20:17:44
categories: 前端技术
tags: [Web,http]

---

# SPA与MPA

|           | 单页面应用(SPA)    | 多页面应用(MPA)                  |
| --------- | ------------- | --------------------------- |
| 组成        | 一个主页面和多个页面片段  | 多个主页面                       |
| 刷新方式      | 局部刷新          | 整页刷新                        |
| url模式     | 哈希模式          | 历史模式                        |
| SEO搜索引擎优化 | 难实现，可以通过SSR改善 | 容易实现                        |
| 数据传递      | 容易            | 通过url、cookie、localStorage实现 |
| 页面切换      | 速度快、无需重新加载    | 切换加载资源、速度慢                  |
| 维护成本      | 相对容易          | 相对复杂                        |

# SPA首屏加载速度慢的问题如何解决

首屏加载时间指的是浏览器从响应用户输入网址地址，到首屏内容渲染完成的时间。

首屏加载速度慢通常是两个大方向导致的，一个是资源加载速度慢，另一个是页面渲染速度慢。

对于资源加载速度慢有以下可以优化的点

1.减少入口文件体积

    不要将所有内容一口气全部发送给客户，可以使用一些比如路由懒加载的方式，只将核心的，首屏相关的部分先发送给客户，页面其他部分可以等到客户需要的时候再发送。

2.充分利用缓存

要设置Cache-Control(缓存方式，可选值：max-age、no-cache)、last-modified(上次修改时间)、Etag(标识资源的版本，用于缓存控制)。

对于一些常用到的静态资源，也可以保存在localstorege。

3.资源的按需加载

除非必要，否则不要将模块整个导入进来，而是用到了哪些，导入哪些。比如antd，用到哪个组件就导入哪个组件，也便于现代Web框架的TreeShaking处理

4.图片资源压缩

对于图片资源也可以采取一些方式去尽可能的压缩

对于页面渲染速度方面

1.可以减少重排和重绘的次数

2.将CSS外链放在html顶部

    将JS外链放在html底部

3.还可以使用SSR的方式来优化首屏加载速度

# 服务器端渲染(SSR)

最近的学习和面试过程中，总能听到SSR带来的各种好处，但是最多就是问问神奇的gpt查一下概念。不过今天我决定对SSR来一次细致的研究。

## 什么是服务器端渲染

首先第一步当然是讲一下是什么，以下是AI给出的回答。

SSR指的是服务器端渲染（Server-Side Rendering），是一种将动态网页内容在服务器端生成并将最终的HTML文件发送到客户端的技术。相对于传统的客户端渲染（Client-Side Rendering），SSR可以提供更好的首屏加载性能和更好的搜索引擎优化（SEO）效果。

通过服务器端渲染，用户在访问网站时可以立即看到完整的页面内容，而不需要等待客户端加载和执行JavaScript代码。这可以提高网站的加载速度和用户体验，特别是对于那些访问速度较慢的用户或设备。

在SSR中，服务器会根据用户请求动态生成页面内容，并将最终的HTML文件发送给客户端。这有助于搜索引擎更好地理解网页内容，提高网页的搜索排名，因为搜索引擎可以直接抓取和索引服务器端生成的HTML内容。

总的来说，SSR是一种重要的技术手段，可以改善网站的性能和用户体验，同时也有助于提升网站在搜索引擎中的排名。

## 服务器端渲染有哪些好处

看完介绍后，我的第一反应是只不过是将原先在客户端构建页面的过程转移到了服务端，最多就是少了一些获取数据的时间，该构建还是得构建，性能就算能提升也没有提升很高吧。但查询了一些资料发现，提升的性能还确实不是一丁半点。

1. 数据获取：这个好处最容易想到，服务端渲染页面，所需的数据可以直接从数据源获取。相比于客户端渲染少了向服务端申请数据、服务端传回数据的过程。对于需要大量数据的页面肯定是能减少很多时间的。

2. 安全：服务器端渲染允许你将敏感数据和逻辑（例如令牌和 API 密钥）保留在服务器上，而不会有将它们暴露给客户端的风险。

3. 打包尺寸：为了将页面构建，客户端通常还需要请求一些专门负责构建页面的包，但在服务器端渲染，客户无需再下载、解析、执行这部分的JS代码，也就减少了打包尺寸，减少了传输时间。

4. 缓存：性能提高的最重要原因。服务器端不需要每次收到请求就重新构建页面，可以只渲染一次页面，并将渲染后的页面缓存来供后续请求和跨用户中重用。这可以通过减少每个请求上完成的渲染和数据获取量来提高性能并降低成本。
