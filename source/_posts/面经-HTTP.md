---
title: 面经-HTTP
date: 2022-08-01
categories: 面经
tags: [面经,http]

---

## HTTP和HTTPS的区别

- HTTPS是HTTP协议的安全版本，HTTP协议的数据传输是明文的，是不安全的，HTTPS应用了加密处理，更加安全
- 默认端口不同，HTTP端口为80，HTTPS端口为443
- HTTPS由于需要设计加密以及多次握手，性能方面不如HTTP

## HTTPS是如何保证安全的

HTTPS使用对称加密与非对称加密混合使用的方法来确保通信安全。具体方法为：服务器首先将证书发送给客户端，客户端拿到证书后，从中提取服务器公钥，客户端随机生成一个随机数作为对称加密中的密钥，将密钥用公钥加密后发送给服务器，服务器用私钥解密后获得了密钥。此时该密钥仅有客户端和服务器所知，后续的传输都使用该密钥来进行对称加密。

完整性验证：服务器将消息使用数字摘要算法得到数字摘要将其附在消息后面，客户端拿到消息后也使用数字摘要算法得到客户端计算的数字摘要。客户端将两个数字摘要进行比对，便可以确定消息是否完整。

证书验证：客户端需要确定网站的合法性，还需要对服务器的证书进行验证。验证方法为：客户端收到证书后，使用认证机构的公钥，对数字签名进行解密，便可确定证书的真实性。

## TCP与UDP的区别

|      | TCP              | UDP             |
|:----:|:----------------:|:---------------:|
| 可靠性  | 可靠               | 不可靠             |
| 连接性  | 面向连接             | 无连接             |
| 报文   | 面向字节流            | 面向报文            |
| 效率   | 低                | 高               |
| 双工性  | 全双工              | 一对一、一对多、多对一、多对一 |
| 流量控制 | 滑动窗口             | 无               |
| 拥塞控制 | 慢开始、拥塞避免、快重传、快恢复 | 无               |

## 七层模型

应用层、表示层、会话层、传输层、网络层、数据链路层、物理层

- 应用层：定义了应用进程间的交互规则，数据单元为报文
- 表示层：使通信的应用程序能够解释交换数据的含义，主要服务包括数据压缩、数据加密、数据描述等
- 会话层：负责建立、管理和终止表示层实体间的通信会话，提供了数据交换的定界和同步功能，包括了建立检查点和恢复方案的方法
- 传输层：为两台主机间的通信提供服务，处理数据包错误、数据包次序等问题。主要协议为TCP/IP
- 网络层：主要任务为选择合适的网间路由和交换节点，确保数据按时成功传送，使用的协议是无连接的网际协议和路由协议(IP层)
- 数据链路层：进行差错控制、流量控制、访问控制。将物理层的比特流转换为数据帧。
- 物理层：确定与传输媒体的接口的一些特性。主要和硬件有关。

## DNS协议

即域名解析协议，负责将域名与ip地址进行转换的服务。

域名的层次结构：根->顶级域名->二级域名->三级域名

域名服务器的层次结构：根域名服务器->顶级域名服务器->权限域名服务器->本地域名服务器

DNS查询方式有两种：递归查询与迭代查询

递归查询：客户端向本地域名服务器发送一个域名查询请求，本地域名服务器若在本地缓存中没有查到，则向根域名服务器发送请求；根域名服务器若没有查询到，则根域名服务器再向下级域名服务器发送请求，以此类推，直到找到对应的ip地址再依次向上返回结果。

迭代查询：客户端向本地域名服务器发送一个域名查询请求，本地域名服务器若在本地缓存中没有查到，则向根域名服务器发送请求；根域名服务器若没有查到，则将下级域名服务器的地址发送给本地域名服务器；本地域名服务器再向下级域名服务器发送请求；以此类推；直到查询到对应的ip地址。

## CDN

即内容分发网络。

构建在现有网络基础之上的智能虚拟网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。简单来讲就是根据用户位置分配最近的资源。

## HTTP1.0/1.1/2.0的区别

http1.0

- 浏览器与服务器只保持短暂的连接，服务器不跟踪每个客户也不记录过去的请求，每次交互都需要开启一个新的连接

http1.1

- 默认支持长连接，即在一个TCP连接上可以传送多个HTTP请求和响应，减少了建立和关闭连接的消耗和延迟
- 引入了管道化技术，即允许客户端不用等待上一次的请求结果返回，就可以发出下一次请求。(队头堵塞：前一个请求迟迟没有处理完导致后续的请求处于堵塞状态)

http2.0

- 引入了多路复用技术，即在一个连接里，客户端和浏览器都可以同时发送多个请求或回应，且不用按照顺序一一对应，避免了队头堵塞
- 二进制分帧，采用二进制格式传输数据，而1.0和1.1使用文本格式。将请求和响应数据分割为更小的帧，并且他们采用二进制编码，多帧之间乱序发送，根据帧首的流标识重新组装，也是多路复用的实现条件
- 首部压缩，对于相同的数据，不再通过每次请求和响应发送。对首部的更改只需发送差异部分即可
- 服务器推送，允许服务器端推送资源给客户端，具体指的是客户端在返回html响应时，可以同时将相关的CSS文件、JS文件等一起推送给客户端。

## 状态码

1XX表示消息

2XX表示成功

3XX表示重定向

4XX表示请求错误

5XX表示服务器错误

常用状态码：

- 100：临时响应，通知客户端其部分请求已经被服务器接收
- 200：成功，请求成功
- 206：部分内容，服务器成功处理了部分请求(断点续传)
- 301：永久重定向，用户访问旧域名时用301定向到新域名
- 302：临时重定向，常用于未登录的用户访问用户中心重定向到登录页面
- 304：协商缓存，告诉客户端有缓存，可以直接使用缓存中的数据
- 400：参数有误，参数有误请求无法被服务器识别
- 403：禁止访问，告诉客户端禁止访问该站点或资源
- 404：服务器找不到资源时，或者服务器拒绝请求又不想说明理由
- 503：服务器停机维护
- 504：网关超时

## GET与POST的区别

- GET请求只能进行url编码，而POST支持多种编码方式
- GET请求在url中传送的参数是有长度限制的，POST没有
- 对参数的数据类型，GET只接受ASCII字符，POST没有限制
- GET参数通过url传递，POST放在Request body中

## HTTP请求包含了哪些部分

包含了四个部分

1. 请求行 请求行包括了请求方法、URL、协议版本
2. 请求头 见下一节
3. 空行
4. 请求数据

## HTTP常见的请求头有哪些

- Host：指定了客户端要访问的服务器的主机名
- User-Agent：浏览器标识符
- Accept：客户端能够接收的数据类型
- Accept-language：客户端能够接收的语言
- Accept-Encoding：客户端能够接收的编码类型
- Referer：用户是通过哪个页面链接访问当前页面
- Connection：连接类型(keep-alive)
- upgrade-insecure-Request：是否升级到HTTPS协议
- if-Modified-Since：客户端指定的资源自给定时间后是否修改过，若没有则返回304
- if-None-Match：客户端指定的资源的eTag是否有变过，若与上次eTag相同则返回304
- Cache-Control：指定客户端缓存当前资源的方式和时间

## 地址栏输入url敲下回车后发生了什么

- url解析，首先判断url的合法性，根据url内容进行对应的操作
- DNS解析，根据域名找到服务器的ip地址
- TCP连接，三次握手
- 发送http请求，浏览器向服务器发送请求
- 响应请求，服务器端接收到浏览器请求后，返回响应
- 页面渲染，浏览器接收到响应资源后，对资源进行解析
  解析HTML，生成DOM树
  解析CSS文件，生成CSS规则树
  结合DOM树与CSS规则树生成渲染树
  回流，根据渲染树计算盒模型的大小、位置信息
  重绘，根据渲染树及盒模型的信息计算像素信息
  显示，浏览器将像素信息发送给GPU，GPU显示在屏幕上

## 对WebSocket的理解

是一种网络传输协议，位于应用层，可以在单个TCP连接上进行全双工通信，能更好的节省服务器资源并达到实时通讯。
